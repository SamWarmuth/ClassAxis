.secondary-row-nohover.no-select
  &nbsp;
  .new-button.flush-right.browse-rooms Find a Room
  .new-button.flush-left.new-room New Room
-@rooms.sort_by{|r| -r.last_message.date}.each do |@room|
  =haml :room_row, :layout => false
      

:javascript
  $(document).ready(function(){
    $("#smessages").children(".secondary-row").first().click();
    var modal = $(".modal");
    $(".new-room").click(function(){
      $(".modal-new").show();
      showModal();
    });
    $(".browse-rooms").click(function(){
      $(".modal-browse").show();
      showModal();
    });
    $(".shroud").click(function(){
      hideModal();
    });
  });
  function showModal(){
    $(".shroud").fadeIn(100);
    $(".modal-border").fadeIn(100);
    $(".modal").fadeIn(100);
  }
  
  function hideModal(){
    $(".shroud").fadeOut(50);
    $(".modal-border").fadeOut(50);
    $(".modal").fadeOut(50, function(){
      $(".modal-new").hide();
      $(".modal-browse").hide();
    });
  }
  
  $(document).keydown(function(e){
    if (e.keyCode == 27){ //escape
      hideModal();
    }
  });